{% extends "../../app/base.html" %}

{% block content %}
    {% load static %}
    {% load format_upload_url %}
    <div class="pt-4">
        <div class="row">
            <div class="col-auto" style="margin-top: 6px;"><a href="{% url 'list_product' %}"><img
                    src="{% static 'app/img/arrow-left.svg' %}"
                    alt=""></a></div>
            <div class="col-auto"><h2>Product Toevoegen</h2></div>
        </div>
        {% if messages %}
            {% for message in messages %}
                <br>
                <div class="alert alert-primary" role="alert" style="width: 98%">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    </div>
    <div class="detail-wrapper pt-5">
        <form action="{% url 'create_product' %}" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="row">
                <div class="col col-lg-2">
                    <div class="form-group">
                        <label>Foto</label>
                        <input type="file" accept="image/*" onchange="loadFile(event)" name="picture">
                        <div class="detail-image">
                            <img id="output"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row pt-5">
                <div class="col col-lg-2">
                    <div class="form-group">
                        <label>Naam</label>
                        <input type="text" class="form-control" name="name">
                    </div>
                </div>
                <div class="col col-lg-2">
                    <div class="form-group">
                        <label>Prijs</label>
                        <input type="number" class="form-control" name="price" step=".01">
                    </div>
                </div>
                <div class="col col-lg-2">
                    <div class="form-group">
                        <label>Product code</label>
                        <input type="number" class="form-control" name="code">
                    </div>
                </div>
            </div>
            <div class="row pt-4">
                <div class="col col-lg-6">
                    <div class="form-group">
                        <label>Omschrijving</label>
                        <textarea type="number" class="form-control"
                                  name="description"></textarea>
                    </div>
                </div>
            </div>
            <div class="row pt-4">
                <div class="col col-lg-6">
                    <div class="form-group">
                        <a href="{% url 'list_product' %}" class="btn btn-secondary">Ga terug</a>
                        <button type="submit" class="btn btn-primary"><img class="button-icon"
                                                                           src="{% static 'app/img/edit-white.svg' %}"
                                                                           alt="">Toevoegen
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <script>
        var loadFile = function (event) {
            var output = document.getElementById('output');
            output.src = URL.createObjectURL(event.target.files[0]);
            output.onload = function () {
                URL.revokeObjectURL(output.src) // free memory
            }
        };
    </script>
{% endblock content %}
