{% extends "../base.html" %}

{% block content %}
    {% load static %}
    {% load format_upload_url %}
    {% load format_price %}
    {% load multiply %}
    <div class="pt-5">
        <div class="row">
            <div class="col-auto">
                <div class="datatable-image pt-3">
                    <div class="datatable-image-cropper" style="width: 130px; height: 130px;">
                        <img class="datatable-image" src="{% static member.picture|format_upload_url %}"
                             alt="">
                    </div>
                </div>
            </div>
            <div class="col-auto" style="margin-top: 40px">
                <h2>{{ member.first_name }} {{ member.last_name }}</h2>
            </div>
        </div>
        {% if messages %}
            {% for message in messages %}
                <br>
                <div class="alert alert-primary" role="alert" style="width: 98%">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    </div>
    <div class="datatable-wrapper">
        <div class="row g-3 align-items-center">
            <div class="col col-lg-5">
                <div class="input-group">
                    <span class="input-group-text"><img
                            src="{% static 'app/img/search.svg' %}"
                            alt=""></span>
                    <input type="text" id="searchbox" class="form-control" placeholder="Zoek producten...">
                </div>
            </div>
            <div class="col-auto">
                <div class="row">
                    <div class="col-auto">
                        <span><img style="margin-bottom: 4px; margin-right: 10px;"
                                   src="{% static 'app/img/information.svg' %}"
                                   alt=""></i>Selecteer een product om toe te voegen.
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <div class="pt-3 detail-subtitle">
            <p><b>Producten</b></p>
        </div>
        <div class="row cashier">
            {% for product in products %}
                <div class="col col-lg-2 pb-4" style="min-width: 200px">
                    <a href="{% url 'create_order' member_id=member.id product_id=product.id %}">
                        <div class="card" style="text-align: center;">
                            <div class="datatable-image pt-3">
                                <div class="datatable-image-cropper" style="width: 130px; height: 130px;">
                                    <img class="datatable-image" src="{% static product.picture|format_upload_url %}"
                                         alt="">
                                </div>
                            </div>
                            <div class="card-body pt-4">
                                <h5 class="card-title">{{ product.name }} <br>€{{ product.price|format_price }}</h5>
                            </div>
                        </div>
                    </a>
                </div>
            {% endfor %}
        </div>
    </div>
    <div class="buttons-cashier pb-3">
        <a style="position: absolute; bottom: 15px;" href="{% url 'list_present' %}" class="btn btn-secondary">Ga
            terug</a>
        <div style="float: right; padding-right: 350px">
            {% if order %}
                <ul class="list-group">
                    {% for order_product in order_products %}
                        <li class="list-group-item">
                            <span>{{ order_product.product_name }}</span>
                            <span style="float: right;">
                                <a href="{% url 'decrease_product_quantity' member_id=member.id product_id=order_product.product_id.id %}">
                                    <img height="20" src="{% static 'app/img/minus_black.svg' %}" alt="">
                                </a>
                                {{ order_product.quantity }}
                                <a href="{% url 'increase_product_quantity' member_id=member.id product_id=order_product.product_id.id %}">
                                    <img style="height: 20px" src="{% static 'app/img/plus_black.svg' %}" alt="">
                                </a>
                                <span>€{{ order_product.quantity | multiply:order_product.product_price }}</span>
                            </span>
                        </li>
                    {% endfor %}
                    <li class="list-group-item">Totaal <span
                            style="float: right;">€{{ total_price|format_price }}</span></li>
                </ul>
            {% endif %}
            <a href="#" class="btn btn-primary">Afrekenen</a>
        </div>
    </div>
{% endblock content %}
